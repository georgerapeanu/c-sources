#include <cstdio>
#include <algorithm>
using namespace std;
FILE *f,*g;
int b,n,k,s,p,v[1002],i,j;
int main()
{
    f=fopen("clepsidru.in","r");
    g=fopen("clepsidru.out","w");
    fscanf(f,"%d %d",&n,&b);
    fprintf(g,"%d\n",b+n-1);// punctul a
    fscanf(f,"%d",&k);
    v[1]=b;
    for(i=1;i<=k;i++)
    {
        fscanf(f,"%d %d",&s,&p);
        if(p==1)
        {
            v[1]=max(0,v[1]-s);
            if(s>=n)
            v[n]+=max(min(v[1],s-n+1),0);
            for(j=2;j<=n-1;j++)
            {
                if(j+s>n)
                v[n]+=v[j];
                if(2+s-v[1]<=j&&1+s>=j)
                {
                    v[j]=1;
                }
                else
                v[j]=0;
            }
        }
        else
        {
            v[n]=max(0,v[n]-s);
            if(s>=n)
            v[1]+=max(min(v[n],s-n+1),0);
            for(j=n-1;j>1;j--)
            {
                if(j-s<=1)
                v[1]+=v[j];
                if(n-s<=j&&j<=2+s-v[n])
                v[j]=1;
                else
                v[j]=0;
            }
        }
    }
    fprintf(g,"%d ",v[1]);
    if(p==1)
    {
        for(i=2;i<=n-1;i++)
        {
            fprintf(g,"0\n%d ",v[i]);
        }
    }
    else
    {
        for(i=2;i<=n-1;i++)
        {
            fprintf(g,"%d\n0 ",v[i]);
        }
    }
    fprintf(g,"%d",v[n]);
    fclose(f);
    fclose(g);
    return 0;
}
