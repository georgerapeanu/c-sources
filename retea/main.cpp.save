#include <cstdio>
#include <algorithm>
#include <vector>
#define inf 1000000005
using namespace std;
FILE *f=fopen("retea.in","r");
FILE *g=fopen("retea.out","w");
vector <int> vecini[1100];
double l[1100][1100];
int N,M,K,x,y,n,nod;
double cost[1100][1100];
int val,q,i,j,k;
int main()
{
    fscanf(f,"%d %d %d",&N,&M,&K);
    for(i=1;i<=N;i++)
        for(j=1;j<=N;j++)
            l[i][j]=cost[i][j]=inf;
    for(i=1;i<=M;i++)
    {
        fscanf(f,"%d %d %d",&x,&y,&val);
        cost[x][y]=cost[y][x]=val;
        vecini[x].push_back(y);
        vecini[y].push_back(x);
    }
    for(i=1;i<=N;i++)
    {
        for(j=1;j<=K;j++)
        {
            n=vecini[i].size();
            for(k=1;k<n;k++)
            {
                for(q=0;q<=j;q++)
                {
                    l[i][j]=min(l[i][j],l[vecini[i][k]][j-q]+cost[vecini[k]][i]/(1<<q));
                }
            }
        }
    }
    fprintf(g,"%d",l[N][K]);
    return 0;
}
